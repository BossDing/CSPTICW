/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2018-04-22 15:45:33 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.pages;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class regist_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("\t<title>用户注册</title>\r\n");
      out.write("    <link href=\"../resource/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"../resource/css/common.css\">\r\n");
      out.write("    <link rel=\"stylesheet\" type=\"text/css\" href=\"../resource/css/regist.css\">\r\n");
      out.write("</head>\r\n");
      out.write("<body ng-app=\"regist\" class=\"body container-fluid\">\r\n");
      out.write("<div id=\"container-fluid\">\r\n");
      out.write("    <!--登录条-->\r\n");
      out.write("    <div class=\"nav_log row\">\r\n");
      out.write("        <div class=\"change_city  col-xs-2 col-sm-2 col-md-2 col-lg-2\">\r\n");
      out.write("            <span>上海站</span><a href=\"#\">【切换城市】</a>\r\n");
      out.write("        </div>\r\n");
      out.write("        <!--登录注册部分-->\r\n");
      out.write("        <div class=\"login_out col-xs-offset-8 col-sm-offset-8 col-md-offset-8 col-md-offset-8\r\n");
      out.write("            col-xs-2 col-sm-2 col-md-2 col-lg-2\">\r\n");
      out.write("            用户信息\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <!--导航条-->\r\n");
      out.write("    <div class=\"nav_head row\">\r\n");
      out.write("        <!--log图片-->\r\n");
      out.write("        <a href=\"to_main\">\r\n");
      out.write("            <div class=\"log_img col-xs-3 col-sm-3 col-md-3 col-lg-3 \"></div>\r\n");
      out.write("        </a>\r\n");
      out.write("        <div class=\"nav-path col-xs-2 col-sm-2 col-md-2 col-lg-2\">\r\n");
      out.write("            <a href=\"to_main\">首页</a>&nbsp;&nbsp;/&nbsp;&nbsp;\r\n");
      out.write("            用户注册\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <!--主体-->\r\n");
      out.write("    <div class=\"center-body row container\" ng-controller=\"ChangeRegist\">\r\n");
      out.write("        <!--面板-->\r\n");
      out.write("        <div class=\"panel panel-default col-xs-offset-2 col-sm-offset-2 col-md-offset-2\r\n");
      out.write("                    col-lg-offset-2 col-xs-8 col-sm-8 col-md-8 col-lg-8\">\r\n");
      out.write("            <div class=\"panel-heading regist-head\" >\r\n");
      out.write("                <ul class=\"nav nav-pills  nav-justified\">\r\n");
      out.write("                    <li ng-class=\"{'student':'active'}[regist]\" ng-click=\"regist='student'\">\r\n");
      out.write("                        <a href=\"\">大学生用户注册</a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li ng-class=\"{'company':'active'}[regist]\" ng-click=\"regist='company'\">\r\n");
      out.write("                        <a href=\"\">企业用户注册</a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                </ul>\r\n");
      out.write("            </div>\r\n");
      out.write("            <!--注册体-->\r\n");
      out.write("            <div class=\"panel-body regist-body\">\r\n");
      out.write("                <form name=\"angularForm\" novalidate>\r\n");
      out.write("                    <input type=\"hidden\" id=\"regist\" name=\"regist\" ng-model=\"regist\">\r\n");
      out.write("                    <div class=\"form-horizontal regist-form\">\r\n");
      out.write("                        <!--手机号-->\r\n");
      out.write("                        <div class=\"form-group\" ng-class=\"{true:'has-error'}[userNameErr]\" ng-click=\"userNameErr = false\">\r\n");
      out.write("                            <label for=\"userName\" class=\"control-label col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-lg-offset-2\r\n");
      out.write("                                col-xs-2 col-sm-2 col-md-2 col-lg-2\">手机号：</label>\r\n");
      out.write("                            <div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\">\r\n");
      out.write("                                <input type=\"text\" class=\"form-control\" required=\"required\" id=\"userName\"\r\n");
      out.write("                                       placeholder=\"请输入手机号码\" name=\"userName\"  ng-model=\"userName\" ng-pattern=\"/^1[3|4|5|7|8]\\d{9}$/\" \r\n");
      out.write("                                       check-phone=\"\">\r\n");
      out.write("                                <span class=\"input-error ng-cloak\" ng-show=\"angularForm.userName.$dirty && angularForm.userName.$error.pattern\">\r\n");
      out.write("                                   * 手机号格式错误</span>\r\n");
      out.write("                                <span class=\"input-error ng-cloak\" ng-show=\"angularForm.userName.$dirty && angularForm.userName.$error.repeatphone\">\r\n");
      out.write("                                * 手机号已被注册</span>\r\n");
      out.write("                                   \r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <!--密码-->\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"password\" class=\"control-label col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-lg-offset-2\r\n");
      out.write("                                col-xs-2 col-sm-2 col-md-2 col-lg-2\">密码：</label>\r\n");
      out.write("                            <div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\">\r\n");
      out.write("                                <input type=\"password\" class=\"form-control\" id=\"password\" placeholder=\"请输入密码\"\r\n");
      out.write("                                       name=\"password\" ng-model=\"password\" required=\"required\" ng-pattern=\"/^\\d{6}$/\">\r\n");
      out.write("                                <span class=\"input-error ng-cloak\" ng-show=\"angularForm.password.$dirty && angularForm.password.$error.pattern\">\r\n");
      out.write("                                    *密码格式错误\r\n");
      out.write("                                </span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <!--重复密码-->\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"repassword\" class=\"control-label col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-lg-offset-2\r\n");
      out.write("                                col-xs-2 col-sm-2 col-md-2 col-lg-2\">确认密码：</label>\r\n");
      out.write("                            <div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\">\r\n");
      out.write("                                <input type=\"password\" class=\"form-control\" id=\"repassword\" placeholder=\"请再次输入密码\"\r\n");
      out.write("                                       name=\"repassword\"  ng-model=\"repassword\" required=\"required\" compare-pwd=\"password\">\r\n");
      out.write("                                <span class=\"input-error ng-cloak\" ng-show=\"angularForm.repassword.$dirty && angularForm.repassword.$error.pwdmatch\">两次密码输入不一致</span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <!--短信验证码-->\r\n");
      out.write("                        <div class=\"form-group\" ng-class=\"{true:'has-error'}[validateCodeErr]\" ng-click=\"validateCodeErr = false\">\r\n");
      out.write("                            <div class=\"col-xs-offset-2 col-sm-offset-2 col-md-offset-3 col-lg-offset-3\r\n");
      out.write("                                col-xs-4 col-sm-4 col-md-4 col-lg-4 \">\r\n");
      out.write("                                <input type=\"text\" class=\"form-control\" id=\"validateCode\" placeholder=\"请输入短信验证码\"\r\n");
      out.write("                                       name=\"validateCode\" ng-model=\"validateCode\" maxlength=\"6\">\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"col-xs-4 col-sm-4 col-md-4 col-lg-4 \">\r\n");
      out.write("                                <button id=\"send_msg_btn\" type=\"submit\"  class=\"btn btn-success\" ng-click=\"sendMessage()\" \r\n");
      out.write("                                \tng-disabled=\"!angularForm.$valid||!agreement\">\r\n");
      out.write("                                \t免费获取验证码\r\n");
      out.write("                                </button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <!--同意协议-->\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <div class=\"col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5\r\n");
      out.write("                                col-xs-4 col-sm-4 col-md-4 col-lg-4\">\r\n");
      out.write("                                <div class=\"checkbox\">\r\n");
      out.write("                                    <label>\r\n");
      out.write("                                        <input type=\"checkbox\"  ng-model=\"agreement\"> 同意 <a href=\"#\" >《兼职网站协议》</a>\r\n");
      out.write("                                        <span class=\"input-error ng-cloak\" ng-show=\"!agreement\"><br>* 注册需要同意此协议</span>\r\n");
      out.write("                                    </label>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <!--注册按钮-->\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <div class=\"col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5\">\r\n");
      out.write("                                <button type=\"submit\" class=\"btn btn-lg btn-success col-xs-5 col-sm-5 col-md-5 col-lg-5\"\r\n");
      out.write("                                        ng-click=\"submitRegist()\" ng-disabled=\"!angularForm.$valid||!agreement\">注册</button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <!--已有账号-->\r\n");
      out.write("                        <div class=\"login-url col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5\r\n");
      out.write("                            col-xs-5 col-sm-5 col-md-5 col-lg-5\">\r\n");
      out.write("                            已有账号？<a href=\"/to_login\">去登陆</a>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </form>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\" src=\"../resource/js/jquery-3.2.1.min.js\"></script>\r\n");
      out.write("<script src=\"../resource/js/bootstrap.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../resource/js/angular.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    var app=angular.module('regist',[]);\r\n");
      out.write("    app.controller('ChangeRegist',function ($scope,$http,$location) {\r\n");
      out.write("    \tconsole.log( $location.absUrl());\r\n");
      out.write("        $scope.regist=\"student\";\r\n");
      out.write("        $scope.validateCode=\"\";\r\n");
      out.write("        //手机号错误\r\n");
      out.write("        $scope.userNameErr=false;\r\n");
      out.write("        //验证码错误\r\n");
      out.write("        $scope.validateCodeErr=false;\r\n");
      out.write("        //同意协议\r\n");
      out.write("        $scope.agreement=true;\r\n");
      out.write("        //发送短信\r\n");
      out.write("        $scope.sendMessage=function(){\r\n");
      out.write("      \t   \t$http({\r\n");
      out.write("        \t\turl:'/regist/send_message',\r\n");
      out.write("        \t\tmethod:'post',\r\n");
      out.write("        \t\tdata:{'userName':$scope.userName}\r\n");
      out.write("        \t}).success(function(response, status, headers, config){\r\n");
      out.write("        \t\t//返回的msg\r\n");
      out.write("        \t\tvar msgCode=response.msg.Code;\r\n");
      out.write("        \t\tif(msgCode==\"OK\"){\r\n");
      out.write("        \t\t\t//发送成功\r\n");
      out.write("        \t\t\t//倒计时\r\n");
      out.write("        \t\t\tvar count=60;\r\n");
      out.write("              \t \tvar timeout = false; //启动及关闭按钮 \r\n");
      out.write("              \t   \tfunction set_msg_time(){\r\n");
      out.write("              \t\t   \tif(count==0){\r\n");
      out.write("              \t\t\t   \tif(timeout)return;\r\n");
      out.write("              \t\t\t   \t$('#send_msg_btn').attr(\"disabled\", false);\r\n");
      out.write("              \t\t\t   \t$('#send_msg_btn').html(\"免费获取验证码\");\r\n");
      out.write("              \t\t\t \ttimeout=true;\r\n");
      out.write("              \t\t   \t}else{\r\n");
      out.write("              \t\t\t   \t$(\"#send_msg_btn\").attr(\"disabled\", true);\r\n");
      out.write("              \t\t\t   \t$(\"#send_msg_btn\").html(\"重新发送(\" + count + \"s)\");\r\n");
      out.write("              \t\t\t   \tcount--;  \r\n");
      out.write("              \t\t\t \ttimeout=false;\r\n");
      out.write("              \t\t   \t}\r\n");
      out.write("              \t\t   \twindow.setTimeout(set_msg_time, 1000);\r\n");
      out.write("              \t   \t}\r\n");
      out.write("              \t   \tset_msg_time();\r\n");
      out.write("        \t\t}else{\r\n");
      out.write("        \t\t\t//发送失败，更换手机号\r\n");
      out.write("        \t\t\talert(\"验证码发送失败，尝试更换手机号\");\r\n");
      out.write("        \t\t\t$scope.userNameErr=true;\r\n");
      out.write("        \t\t\t//重新发送\r\n");
      out.write("        \t\t}\r\n");
      out.write("        \t});\r\n");
      out.write("        }\r\n");
      out.write("        //提交表单\r\n");
      out.write("        $scope.submitRegist=function () {\r\n");
      out.write("        \t//提交的表单信息\r\n");
      out.write("        \t$scope.formData ={'regist':$scope.regist,'userName':$scope.userName,'password':$scope.password,'validateCode':$scope.validateCode};\r\n");
      out.write("           \t$http({\r\n");
      out.write("        \t   \turl:'/regist',\r\n");
      out.write("        \t   \tmethod:'post',\r\n");
      out.write("        \t   \tdata:$scope.formData\r\n");
      out.write("           \t}).success(function(response, status, headers, config){\r\n");
      out.write("        \t   \t/*response   -- 成功返回的数据 \r\n");
      out.write("\t               status     -- 状态码 \r\n");
      out.write("\t               headers    -- 头信息 \r\n");
      out.write("\t               config     -- 其他信息 \r\n");
      out.write("\t             */\r\n");
      out.write("        \t   \tif(response.msg){\r\n");
      out.write("        \t   \t\t//注册成功\r\n");
      out.write("        \t   \t\t//跳转至主页\r\n");
      out.write("        \t   \t\t//$location.path(\"to_main\");\r\n");
      out.write("        \t   \t\twindow.location.href=\"/to_main\";\r\n");
      out.write("        \t   \t}else if(response.error){\r\n");
      out.write("        \t   \t\t//验证码错误\r\n");
      out.write("        \t   \t\tif(response.error='1002'){\r\n");
      out.write("        \t   \t\t\talert(\"验证码错误\");\r\n");
      out.write("        \t   \t\t\t$scope.validateCodeErr=true;\r\n");
      out.write("        \t   \t\t}\r\n");
      out.write("        \t   \t\telse{\r\n");
      out.write("        \t   \t\t\talert(\"注册失败\");\r\n");
      out.write("        \t   \t\t}\r\n");
      out.write("        \t   \t}\r\n");
      out.write("           \t}).error(function(response, status, headers, config){\r\n");
      out.write("           \t});  \r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("    //自定义验证两次密码不一致\r\n");
      out.write("    app.directive('comparePwd',function () {\r\n");
      out.write("        return{\r\n");
      out.write("            require:'ngModel',\r\n");
      out.write("            link : function(scope,elem,attrs,c){\r\n");
      out.write("                var firstPwdIdObj = \"#\" + attrs.comparePwd;\r\n");
      out.write("                $(elem).add(firstPwdIdObj).on('keyup',function(){\r\n");
      out.write("                    scope.$apply(function(){\r\n");
      out.write("                        var flag = elem.val() === $(firstPwdIdObj).val();\r\n");
      out.write("                        c.$setValidity(\"pwdmatch\",flag);\r\n");
      out.write("                    });\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("    //手机号重复验证\r\n");
      out.write("    app.directive('checkPhone',function ($http) {\r\n");
      out.write("    \treturn{\r\n");
      out.write("    \t\trequire:'ngModel',\r\n");
      out.write("    \t\tlink : function(scope,elem,attrs,c){\r\n");
      out.write("    \t\t\tscope.$watch(attrs.ngModel+' + regist', function(n){\r\n");
      out.write("   \t\t\t\t\tif(!elem.val()) return;\r\n");
      out.write("    \t\t\t\t$http({\r\n");
      out.write("    \t\t\t\t\turl:'/regist/check_username',\r\n");
      out.write("    \t        \t   \tmethod:'get',\r\n");
      out.write("    \t        \t   \tparams:{'userName':elem.val(),'regist': scope.regist}\r\n");
      out.write("    \t\t\t\t}).success(function(response, status, headers, config){\r\n");
      out.write("    \t\t\t\t\tif(response.msg){\r\n");
      out.write("    \t\t\t\t\t\tc.$setValidity(\"repeatphone\",true);\r\n");
      out.write("    \t\t\t\t\t}else if(!response.msg && response.error=='2002'){\n");
      out.write("    \t\t\t\t\t\tc.$setValidity(\"repeatphone\",false);\r\n");
      out.write("    \t\t\t\t\t}\r\n");
      out.write("    \t\t\t\t})\r\n");
      out.write("    \t\t\t})\r\n");
      out.write("    \t\t}\r\n");
      out.write("    \t}\r\n");
      out.write("    });\r\n");
      out.write("  \r\n");
      out.write("</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
